name: stale-branches.yml â€“ Delete Stale Branches

on:
  workflow_dispatch:  # Manual trigger from GitHub UI
  schedule:
    - cron: '0 6 * * 0'

permissions: 
  contents: read

jobs:
  stale_branches:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      issues: write
    steps:
      - name: Harden the runner (Audit all outbound calls)
        uses: step-security/harden-runner@f4a75cfd619ee5ce8d5b864b0d183aff3c69b55a # v2.13.1
        with:
          egress-policy: audit

      - name: Stale Branches
        uses: crs-k/stale-branches@865501af01284d43aef267d4b9aab0f9f1734b12 # v8.2.2
        with:
            # days-before-delete: 180
            # comment-updates: false
            # max-issues: 20
            tag-committer: true
            stale-branch-label: 'stale branch ğŸ—‘ï¸'
            # compare-branches: 'info'
            # branches-filter-regex: '^((?!dependabot))'
            # rate-limit: false
            # pr-check: false
            # dry-run: false
            # ignore-issue-interaction: false
            # include-protected-branches: false
            # include-ruleset-branches: false
            # ignore-commit-messages: ''
            # ignore-committers: ''
